# 요구사항 명세서

## 1. 프로젝트 개요

### 1.1 프로젝트 명
AI 기반 e커머스 상품 이미지 자동 생성 및 마케팅 통합 플랫폼

### 1.2 목적
- 소규모 온라인 판매자에게 배경 제거부터 광고 문구 생성까지 원스톱 이미지 마케팅 솔루션 제공
- 비전문가도 30초 내에 전문가 수준의 상품 이미지 제작 가능
- SNS 공유 기능을 통한 즉각적인 마케팅 실행 및 바이럴 효과 창출

---

## 2. 기능 요구사항

### 2.1 이미지 생성 시스템

#### FR-001: AI 배경 제거
- **우선순위**: P0 (필수)
- **요구사항**:
  - Rembg 모델을 사용한 자동 배경 제거
  - 투명 PNG 형식 출력
  - Docker 컨테이너화 지원
  - 처리 시간: 2초 이내
- **입력**: JPG, PNG (최대 10MB)
- **출력**: 투명 배경 PNG

#### FR-002: 배경 합성
- **우선순위**: P0 (필수)
- **요구사항**:
  - Unsplash API 연동으로 고품질 배경 이미지 제공
  - 5가지 기본 배경 스타일 제공:
    1. 깔끔한 흰색 (미니멀)
    2. 고급 대리석 (프리미엄)
    3. 자연광 느낌 (부드러운)
    4. 파스텔 그라데이션 (감성)
    5. 스튜디오 그림자 (전문가)
  - 상품 카테고리별 최적 배경 자동 추천
  - Redis + Supabase Storage 3단계 캐싱 전략
- **성능**: 5초 이내 합성 완료

#### FR-003: 이미지 품질 최적화
- **우선순위**: P0 (필수)
- **요구사항**:
  - Pillow 기반 자동 색상 보정
  - 그림자 효과 자동 추가
  - 리사이징 (최대 1920x1080)
  - 출력 포맷: JPG (품질 95%), PNG

#### FR-004: AI 프롬프트 편집
- **우선순위**: P1 (중요)
- **요구사항**:
  - 자연어 프롬프트로 이미지 세밀 조정
  - 지원 기능:
    - 밝기/대비/채도 조절
    - 상품 위치 이동
    - 그림자 강도 조절
    - 블러/보케 효과
  - 프롬프트 길이: 100자 이내
  - 처리 시간: 15초 이내
- **남용 방지**:
  - 일일 사용량: 10회
  - 시간당: 3회
  - 크레딧: 1회당 1 크레딧

---

### 2.2 광고 문구 생성 엔진

#### FR-005: 이미지 분석 기반 문구 생성
- **우선순위**: P0 (필수)
- **요구사항**:
  - GPT-4 Vision으로 상품 카테고리, 색상, 분위기 자동 분석
  - 분석 결과 캐싱 (Redis, TTL 1시간)
  - GPT-4o-mini 기반 광고 문구 생성
  - 처리 시간: 5초 이내
- **출력**: 3가지 스타일 옵션
  1. 감성형 (추천) - 200-250자, 해시태그 8-10개
  2. 질문형 - 150-200자, 해시태그 5-7개
  3. 간결형 - 80-120자, 해시태그 3-5개

#### FR-006: 플랫폼별 최적화
- **우선순위**: P0 (필수)
- **요구사항**:
  - 인스타그램: 감성적, 해시태그 10-15개, 최대 2200자
  - 페이스북: 정보 중심, 해시태그 3-5개, 최대 500자
  - 카카오톡: 짧고 임팩트, 해시태그 없음, 최대 200자
- **크레딧**: 1회당 0.5 크레딧

#### FR-007: 문구 커스터마이징
- **우선순위**: P1 (중요)
- **요구사항**:
  - 4가지 분위기 선택: 밝고 친근한, 열정적인, 고급스러운, 직접 작성
  - 3가지 길이 옵션: 짧게, 보통, 길게
  - 스타일 옵션:
    - 이모지 사용 여부
    - 미사여구 자제
    - 과한 표현 자제
    - 해시태그 개수 조절
  - 커스텀 프롬프트 입력 (200자 이내)

#### FR-008: 남용 방지 시스템
- **우선순위**: P0 (필수)
- **요구사항**:
  - OpenAI Moderation API 연동으로 부적절 콘텐츠 차단
  - Rate Limiting:
    - 일일 10회
    - 시간당 3회
  - 금지 키워드 필터링
  - 위반 로그 기록 및 자동 계정 플래그 (3회 위반 시)

---

### 2.3 SNS 공유 기능

#### FR-009: SNS 직접 공유
- **우선순위**: P0 (필수)
- **요구사항**:
  - 인스타그램: 딥링크 + 클립보드 방식
  - 페이스북: Web Share API 또는 Share Dialog
  - 카카오톡: Kakao SDK 사용
- **버튼 문구**: "SNS에 공유하기" (사용자 통제 강화)

#### FR-010: AI 제작 표시
- **우선순위**: P1 (중요)
- **요구사항**:
  - 투명성: "이 광고는 [서비스명] AI로 제작되었습니다"
  - 표시 위치: 화면 하단 (작고 눈에 띄지 않게)
  - 상세 정보 옵션:
    - 이미지: Rembg + Unsplash
    - 광고 문구: GPT-4o-mini
    - 제작 시간: 약 5초
- **워터마크**: 이미지 우측 하단 (Pro 플랜에서 제거 가능)

#### FR-011: 해시태그 자동 생성
- **우선순위**: P0 (필수)
- **요구사항**:
  - 플랫폼별 최적 개수 자동 생성
  - 인기 있고 관련성 높은 해시태그 선별
  - 사용자 수정 가능

---

### 2.4 사용자 온보딩 시스템

#### FR-012: 5단계 퍼널 최적화
- **우선순위**: P0 (필수)

**Stage 1: 랜딩 페이지 (미가입)**
- Before/After 슬라이더 (메인 비주얼)
- 샘플 갤러리 (운동화, 시계, 가방)
- CTA: "무료로 시작하기 - 회원가입 없이 체험"
- 목표: 60% 체험 전환율

**Stage 2: 즉시 체험 (회원가입 전)**
- 워터마크 결과 미리보기
- 처리 중 애니메이션 (재미있게)
- Exit Intent 모달: "10 크레딧 무료" 재안내
- 목표: 40% 가입 전환율

**Stage 3: 회원가입**
- 소셜 로그인 3종 (Google, Kakao, Naver)
- 이메일 가입
- 10 크레딧 무료 지급 (30일 유효)
- 가입 시간: 30초 이내

**Stage 4: 3단계 인터랙티브 튜토리얼**
- Step 1: 프로젝트 생성
- Step 2: 배경 스타일 선택
- Step 3: 이미지 업로드 및 생성
- 완료 보상: +2 크레딧
- 목표: 80% 활성화율

**Stage 5: 지속 참여 유도**
- 시작 가이드 체크리스트 (5개 항목)
- 완료 시 총 +10 크레딧
- 보너스 크레딧 제공

#### FR-013: Sticky CTA
- **우선순위**: P1 (중요)
- **요구사항**:
  - 우측 고정 가입 유도 버튼
  - 2초 후 등장
  - 펄스 효과 (빛나는 애니메이션)
  - 혜택 리스트 표시

---

### 2.5 신규 기능 잠금 해제

#### FR-014: 실용성 중심 기능
- **우선순위**: P1 (중요)

**Level 1 (3개 생성)**: 일괄 다운로드
- ZIP 파일로 모든 이미지 한 번에 다운로드

**Level 2 (5개 생성)**: 플랫폼별 맞춤 크기
- 네이버 쇼핑: 700x700 JPG
- 쿠팡: 800x800 JPG
- 인스타그램 피드: 1080x1080 JPG
- 인스타 스토리: 1080x1920 PNG
- 페이스북: 1200x630 JPG

**Level 3 (10개 생성)**: 배경 스타일 저장
- 즐겨찾기 최대 5개

**Level 4 (20개 생성)**: 일괄 재생성
- 여러 이미지 배경/문구 동시 변경

**Level 5 (50개 생성)**: 이미지 히스토리 검색
- 키워드 검색 기능

---

## 3. 비기능 요구사항

### 3.1 성능 요구사항

#### NFR-001: 응답 시간
- 이미지 처리 전체: 30초 이내
- 배경 제거: 2초 이내
- 배경 합성: 5초 이내
- 광고 문구 생성: 5초 이내

#### NFR-002: 동시 사용자
- 최소 100명 동시 처리
- 피크 시간 대응 (Auto Scaling)

#### NFR-003: 캐싱 전략
- Redis 캐싱: 이미지 분석 결과 (TTL 1시간)
- Supabase Storage: 인기 배경 100개 사전 저장
- API 비용 60% 절감 목표

---

### 3.2 보안 요구사항

#### NFR-004: 인증 및 인가
- Supabase Auth 사용
- JWT 토큰 기반
- Row Level Security (RLS) 적용

#### NFR-005: API 보안
- CORS 설정
- Rate Limiting (일일 10회, 시간당 3회)
- API Key 검증

#### NFR-006: 데이터 보호
- 업로드 파일 검증 (최대 10MB, JPG/PNG만 허용)
- XSS, SQL Injection 방지
- 민감 정보 암호화

---

### 3.3 사용성 요구사항

#### NFR-007: 사용자 경험
- 첫 결과물까지 소요 시간: 2분 이내
- 튜토리얼 완료율: 70% 이상
- 온보딩 이탈률: 30% 이하

#### NFR-008: 접근성
- 모바일 반응형 디자인
- 주요 브라우저 지원 (Chrome, Safari, Edge, Firefox)
- 최소 화면 크기: 360px

---

### 3.4 확장성 요구사항

#### NFR-009: 아키텍처
- 마이크로서비스 아키텍처
- Docker 컨테이너화
- BaaS (Supabase) 활용

#### NFR-010: 데이터 관리
- PostgreSQL (Supabase)
- Redis (캐싱 및 세션)
- Supabase Storage (이미지 파일)

---

## 4. 제약사항

### 4.1 기술적 제약
- Python 3.11+
- Node.js 18+
- Docker 지원 환경

### 4.2 외부 API 제약
- Unsplash API: 50 requests/hour (무료 플랜)
- OpenAI API: 사용량 기반 과금
- Kakao SDK: 앱 승인 필요

### 4.3 예산 제약
- 월간 API 비용: 100만원 이내
- 서버 비용: 월 50만원 이내

---

## 5. 측정 지표 (KPI)

### 5.1 온보딩 전환율
- Trial Start Rate: 60%
- Signup Conversion: 40%
- Activation Rate: 80%
- Overall Conversion: 19.2%

### 5.2 사용자 참여
- Tutorial Completion: 70%
- Time to First Value: <120초
- D7 Retention: 40%
- D30 Retention: 20%

### 5.3 비즈니스 지표
- 체험 → 가입 전환율: 24% (업계 평균 5-10% 대비 2-3배)
- 유료 전환율: 15%
- 바이럴 유입: +20%

---

## 6. 우선순위 정리

### P0 (필수 - Week 9-10)
- FR-001: AI 배경 제거
- FR-002: 배경 합성 (5가지 기본 스타일)
- FR-003: 이미지 품질 최적화
- FR-005: 이미지 분석 기반 문구 생성
- FR-006: 플랫폼별 최적화
- FR-008: 남용 방지 시스템
- FR-009: SNS 직접 공유
- FR-011: 해시태그 자동 생성
- FR-012: 5단계 온보딩

### P1 (중요 - Week 11-12)
- FR-004: AI 프롬프트 편집
- FR-007: 문구 커스터마이징
- FR-010: AI 제작 표시
- FR-013: Sticky CTA
- FR-014: 신규 기능 잠금 해제

### P2 (선택 - Post-MVP)
- 워터마크 제거 옵션 (Pro 플랜)
- 고급 분석 (문구별 성과)
- A/B 테스트
- 다국어 지원
